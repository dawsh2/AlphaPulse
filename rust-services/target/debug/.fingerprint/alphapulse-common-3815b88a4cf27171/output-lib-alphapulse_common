{"$message_type":"diagnostic","message":"unused import: `uuid::Uuid`","code":{"code":"unused_imports","explanation":null},"level":"warning","spans":[{"file_name":"common/src/types.rs","byte_start":152,"byte_end":162,"line_start":4,"line_end":4,"column_start":5,"column_end":15,"is_primary":true,"text":[{"text":"use uuid::Uuid;","highlight_start":5,"highlight_end":15}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}],"children":[{"message":"`#[warn(unused_imports)]` on by default","code":null,"level":"note","spans":[],"children":[],"rendered":null},{"message":"remove the whole `use` item","code":null,"level":"help","spans":[{"file_name":"common/src/types.rs","byte_start":148,"byte_end":164,"line_start":4,"line_end":5,"column_start":1,"column_end":1,"is_primary":true,"text":[{"text":"use uuid::Uuid;","highlight_start":1,"highlight_end":16},{"text":"","highlight_start":1,"highlight_end":1}],"label":null,"suggested_replacement":"","suggestion_applicability":"MachineApplicable","expansion":null}],"children":[],"rendered":null}],"rendered":"\u001b[0m\u001b[1m\u001b[33mwarning\u001b[0m\u001b[0m\u001b[1m: unused import: `uuid::Uuid`\u001b[0m\n\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/types.rs:4:5\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m4\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0muse uuid::Uuid;\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m     \u001b[0m\u001b[0m\u001b[1m\u001b[33m^^^^^^^^^^\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: `#[warn(unused_imports)]` on by default\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":367,"byte_end":375,"line_start":17,"line_end":17,"column_start":42,"column_end":50,"is_primary":false,"text":[{"text":"    pub fn record_trade_processed(&self, exchange: &str, symbol: &str) {","highlight_start":42,"highlight_end":50}],"label":"`exchange` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`exchange` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":407,"byte_end":485,"line_start":18,"line_end":18,"column_start":9,"column_end":87,"is_primary":false,"text":[{"text":"        counter!(\"trades_processed_total\", \"exchange\" => exchange, \"symbol\" => symbol).increment(1);","highlight_start":9,"highlight_end":87}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":377,"byte_end":378,"line_start":17,"line_end":17,"column_start":52,"column_end":53,"is_primary":false,"text":[{"text":"    pub fn record_trade_processed(&self, exchange: &str, symbol: &str) {","highlight_start":52,"highlight_end":53}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":407,"byte_end":485,"line_start":18,"line_end":18,"column_start":9,"column_end":87,"is_primary":false,"text":[{"text":"        counter!(\"trades_processed_total\", \"exchange\" => exchange, \"symbol\" => symbol).increment(1);","highlight_start":9,"highlight_end":87}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:18:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m17\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_trade_processed(&self, exchange: &str, symbol: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`exchange` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m18\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        counter!(\"trades_processed_total\", \"exchange\" => exchange, \"symbol\" => symbol).increment(1);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`exchange` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `counter` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":383,"byte_end":389,"line_start":17,"line_end":17,"column_start":58,"column_end":64,"is_primary":false,"text":[{"text":"    pub fn record_trade_processed(&self, exchange: &str, symbol: &str) {","highlight_start":58,"highlight_end":64}],"label":"`symbol` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`symbol` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":407,"byte_end":485,"line_start":18,"line_end":18,"column_start":9,"column_end":87,"is_primary":false,"text":[{"text":"        counter!(\"trades_processed_total\", \"exchange\" => exchange, \"symbol\" => symbol).increment(1);","highlight_start":9,"highlight_end":87}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":391,"byte_end":392,"line_start":17,"line_end":17,"column_start":66,"column_end":67,"is_primary":false,"text":[{"text":"    pub fn record_trade_processed(&self, exchange: &str, symbol: &str) {","highlight_start":66,"highlight_end":67}],"label":"let's call the lifetime of this reference `'2`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'2` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":407,"byte_end":485,"line_start":18,"line_end":18,"column_start":9,"column_end":87,"is_primary":false,"text":[{"text":"        counter!(\"trades_processed_total\", \"exchange\" => exchange, \"symbol\" => symbol).increment(1);","highlight_start":9,"highlight_end":87}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:18:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m17\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_trade_processed(&self, exchange: &str, symbol: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'2`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`symbol` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m18\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        counter!(\"trades_processed_total\", \"exchange\" => exchange, \"symbol\" => symbol).increment(1);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`symbol` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'2` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `counter` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":568,"byte_end":576,"line_start":21,"line_end":21,"column_start":62,"column_end":70,"is_primary":false,"text":[{"text":"    pub fn record_processing_latency(&self, latency_ms: f64, exchange: &str) {","highlight_start":62,"highlight_end":70}],"label":"`exchange` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`exchange` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":594,"byte_end":653,"line_start":22,"line_end":22,"column_start":9,"column_end":68,"is_primary":false,"text":[{"text":"        histogram!(\"processing_latency_ms\", \"exchange\" => exchange).record(latency_ms);","highlight_start":9,"highlight_end":68}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":578,"byte_end":579,"line_start":21,"line_end":21,"column_start":72,"column_end":73,"is_primary":false,"text":[{"text":"    pub fn record_processing_latency(&self, latency_ms: f64, exchange: &str) {","highlight_start":72,"highlight_end":73}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":594,"byte_end":653,"line_start":22,"line_end":22,"column_start":9,"column_end":68,"is_primary":false,"text":[{"text":"        histogram!(\"processing_latency_ms\", \"exchange\" => exchange).record(latency_ms);","highlight_start":9,"highlight_end":68}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:22:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m21\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_processing_latency(&self, latency_ms: f64, exchange: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                              \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                              \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                              \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`exchange` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m22\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        histogram!(\"processing_latency_ms\", \"exchange\" => exchange).record(latency_ms);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`exchange` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `histogram` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":730,"byte_end":738,"line_start":25,"line_end":25,"column_start":50,"column_end":58,"is_primary":false,"text":[{"text":"    pub fn record_batch_size(&self, size: usize, exchange: &str) {","highlight_start":50,"highlight_end":58}],"label":"`exchange` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`exchange` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":756,"byte_end":804,"line_start":26,"line_end":26,"column_start":9,"column_end":57,"is_primary":false,"text":[{"text":"        histogram!(\"batch_size\", \"exchange\" => exchange).record(size as f64);","highlight_start":9,"highlight_end":57}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":740,"byte_end":741,"line_start":25,"line_end":25,"column_start":60,"column_end":61,"is_primary":false,"text":[{"text":"    pub fn record_batch_size(&self, size: usize, exchange: &str) {","highlight_start":60,"highlight_end":61}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":756,"byte_end":804,"line_start":26,"line_end":26,"column_start":9,"column_end":57,"is_primary":false,"text":[{"text":"        histogram!(\"batch_size\", \"exchange\" => exchange).record(size as f64);","highlight_start":9,"highlight_end":57}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:26:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m25\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_batch_size(&self, size: usize, exchange: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`exchange` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m26\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        histogram!(\"batch_size\", \"exchange\" => exchange).record(size as f64);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`exchange` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `histogram` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":895,"byte_end":904,"line_start":30,"line_end":30,"column_start":42,"column_end":51,"is_primary":false,"text":[{"text":"    pub fn record_redis_operation(&self, operation: &str, success: bool) {","highlight_start":42,"highlight_end":51}],"label":"`operation` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`operation` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1001,"byte_end":1081,"line_start":32,"line_end":32,"column_start":9,"column_end":89,"is_primary":false,"text":[{"text":"        counter!(\"redis_operations_total\", \"operation\" => operation, \"status\" => status).increment(1);","highlight_start":9,"highlight_end":89}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":906,"byte_end":907,"line_start":30,"line_end":30,"column_start":53,"column_end":54,"is_primary":false,"text":[{"text":"    pub fn record_redis_operation(&self, operation: &str, success: bool) {","highlight_start":53,"highlight_end":54}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1001,"byte_end":1081,"line_start":32,"line_end":32,"column_start":9,"column_end":89,"is_primary":false,"text":[{"text":"        counter!(\"redis_operations_total\", \"operation\" => operation, \"status\" => status).increment(1);","highlight_start":9,"highlight_end":89}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:32:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m30\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_redis_operation(&self, operation: &str, success: bool) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m---------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`operation` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m31\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        let status = if success { \"success\" } else { \"error\" };\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m32\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        counter!(\"redis_operations_total\", \"operation\" => operation, \"status\" => status).increment(1);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`operation` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `counter` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":1159,"byte_end":1168,"line_start":35,"line_end":35,"column_start":57,"column_end":66,"is_primary":false,"text":[{"text":"    pub fn record_redis_latency(&self, latency_ms: f64, operation: &str) {","highlight_start":57,"highlight_end":66}],"label":"`operation` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`operation` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1186,"byte_end":1252,"line_start":36,"line_end":36,"column_start":9,"column_end":75,"is_primary":false,"text":[{"text":"        histogram!(\"redis_operation_latency_ms\", \"operation\" => operation).record(latency_ms);","highlight_start":9,"highlight_end":75}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":1170,"byte_end":1171,"line_start":35,"line_end":35,"column_start":68,"column_end":69,"is_primary":false,"text":[{"text":"    pub fn record_redis_latency(&self, latency_ms: f64, operation: &str) {","highlight_start":68,"highlight_end":69}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1186,"byte_end":1252,"line_start":36,"line_end":36,"column_start":9,"column_end":75,"is_primary":false,"text":[{"text":"        histogram!(\"redis_operation_latency_ms\", \"operation\" => operation).record(latency_ms);","highlight_start":9,"highlight_end":75}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:36:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m35\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_redis_latency(&self, latency_ms: f64, operation: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m---------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`operation` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m36\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        histogram!(\"redis_operation_latency_ms\", \"operation\" => operation).record(latency_ms);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`operation` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `histogram` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":1348,"byte_end":1356,"line_start":40,"line_end":40,"column_start":44,"column_end":52,"is_primary":false,"text":[{"text":"    pub fn record_websocket_message(&self, exchange: &str, message_type: &str) {","highlight_start":44,"highlight_end":52}],"label":"`exchange` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`exchange` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1394,"byte_end":1478,"line_start":41,"line_end":41,"column_start":9,"column_end":93,"is_primary":false,"text":[{"text":"        counter!(\"websocket_messages_total\", \"exchange\" => exchange, \"type\" => message_type).increment(1);","highlight_start":9,"highlight_end":93}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":1358,"byte_end":1359,"line_start":40,"line_end":40,"column_start":54,"column_end":55,"is_primary":false,"text":[{"text":"    pub fn record_websocket_message(&self, exchange: &str, message_type: &str) {","highlight_start":54,"highlight_end":55}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1394,"byte_end":1478,"line_start":41,"line_end":41,"column_start":9,"column_end":93,"is_primary":false,"text":[{"text":"        counter!(\"websocket_messages_total\", \"exchange\" => exchange, \"type\" => message_type).increment(1);","highlight_start":9,"highlight_end":93}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:41:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m40\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_websocket_message(&self, exchange: &str, message_type: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                            \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                            \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                            \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`exchange` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m41\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        counter!(\"websocket_messages_total\", \"exchange\" => exchange, \"type\" => message_type).increment(1);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`exchange` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `counter` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":1364,"byte_end":1376,"line_start":40,"line_end":40,"column_start":60,"column_end":72,"is_primary":false,"text":[{"text":"    pub fn record_websocket_message(&self, exchange: &str, message_type: &str) {","highlight_start":60,"highlight_end":72}],"label":"`message_type` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`message_type` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1394,"byte_end":1478,"line_start":41,"line_end":41,"column_start":9,"column_end":93,"is_primary":false,"text":[{"text":"        counter!(\"websocket_messages_total\", \"exchange\" => exchange, \"type\" => message_type).increment(1);","highlight_start":9,"highlight_end":93}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":1378,"byte_end":1379,"line_start":40,"line_end":40,"column_start":74,"column_end":75,"is_primary":false,"text":[{"text":"    pub fn record_websocket_message(&self, exchange: &str, message_type: &str) {","highlight_start":74,"highlight_end":75}],"label":"let's call the lifetime of this reference `'2`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'2` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1394,"byte_end":1478,"line_start":41,"line_end":41,"column_start":9,"column_end":93,"is_primary":false,"text":[{"text":"        counter!(\"websocket_messages_total\", \"exchange\" => exchange, \"type\" => message_type).increment(1);","highlight_start":9,"highlight_end":93}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:41:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m40\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_websocket_message(&self, exchange: &str, message_type: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                            \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m------------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'2`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                            \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                            \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`message_type` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m41\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        counter!(\"websocket_messages_total\", \"exchange\" => exchange, \"type\" => message_type).increment(1);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`message_type` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'2` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `counter` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":1553,"byte_end":1561,"line_start":44,"line_end":44,"column_start":54,"column_end":62,"is_primary":false,"text":[{"text":"    pub fn record_websocket_connection_status(&self, exchange: &str, connected: bool) {","highlight_start":54,"highlight_end":62}],"label":"`exchange` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`exchange` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6910,"byte_end":6970,"line_start":176,"line_end":176,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":7647,"byte_end":7764,"line_start":188,"line_end":188,"column_start":9,"column_end":126,"is_primary":false,"text":[{"text":"        $crate::gauge!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":126}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1652,"byte_end":1705,"line_start":46,"line_end":46,"column_start":9,"column_end":62,"is_primary":false,"text":[{"text":"        gauge!(\"websocket_connected\", \"exchange\" => exchange).set(status);","highlight_start":9,"highlight_end":62}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"gauge!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6746,"byte_end":6764,"line_start":174,"line_end":174,"column_start":1,"column_end":19,"is_primary":false,"text":[{"text":"macro_rules! gauge {","highlight_start":1,"highlight_end":19}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::gauge!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6746,"byte_end":6764,"line_start":174,"line_end":174,"column_start":1,"column_end":19,"is_primary":false,"text":[{"text":"macro_rules! gauge {","highlight_start":1,"highlight_end":19}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":1563,"byte_end":1564,"line_start":44,"line_end":44,"column_start":64,"column_end":65,"is_primary":false,"text":[{"text":"    pub fn record_websocket_connection_status(&self, exchange: &str, connected: bool) {","highlight_start":64,"highlight_end":65}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6910,"byte_end":6970,"line_start":176,"line_end":176,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":7647,"byte_end":7764,"line_start":188,"line_end":188,"column_start":9,"column_end":126,"is_primary":false,"text":[{"text":"        $crate::gauge!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":126}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1652,"byte_end":1705,"line_start":46,"line_end":46,"column_start":9,"column_end":62,"is_primary":false,"text":[{"text":"        gauge!(\"websocket_connected\", \"exchange\" => exchange).set(status);","highlight_start":9,"highlight_end":62}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"gauge!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6746,"byte_end":6764,"line_start":174,"line_end":174,"column_start":1,"column_end":19,"is_primary":false,"text":[{"text":"macro_rules! gauge {","highlight_start":1,"highlight_end":19}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::gauge!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6746,"byte_end":6764,"line_start":174,"line_end":174,"column_start":1,"column_end":19,"is_primary":false,"text":[{"text":"macro_rules! gauge {","highlight_start":1,"highlight_end":19}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:46:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m44\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_websocket_connection_status(&self, exchange: &str, connected: bool) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                      \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                      \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                      \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`exchange` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m45\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        let status = if connected { 1.0 } else { 0.0 };\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m46\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        gauge!(\"websocket_connected\", \"exchange\" => exchange).set(status);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`exchange` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `gauge` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":1774,"byte_end":1782,"line_start":49,"line_end":49,"column_start":49,"column_end":57,"is_primary":false,"text":[{"text":"    pub fn record_websocket_reconnection(&self, exchange: &str) {","highlight_start":49,"highlight_end":57}],"label":"`exchange` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`exchange` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1800,"byte_end":1865,"line_start":50,"line_end":50,"column_start":9,"column_end":74,"is_primary":false,"text":[{"text":"        counter!(\"websocket_reconnections_total\", \"exchange\" => exchange).increment(1);","highlight_start":9,"highlight_end":74}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":1784,"byte_end":1785,"line_start":49,"line_end":49,"column_start":59,"column_end":60,"is_primary":false,"text":[{"text":"    pub fn record_websocket_reconnection(&self, exchange: &str) {","highlight_start":59,"highlight_end":60}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":1800,"byte_end":1865,"line_start":50,"line_end":50,"column_start":9,"column_end":74,"is_primary":false,"text":[{"text":"        counter!(\"websocket_reconnections_total\", \"exchange\" => exchange).increment(1);","highlight_start":9,"highlight_end":74}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:50:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m49\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_websocket_reconnection(&self, exchange: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                 \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                 \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                 \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`exchange` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m50\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        counter!(\"websocket_reconnections_total\", \"exchange\" => exchange).increment(1);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`exchange` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `counter` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":2394,"byte_end":2405,"line_start":68,"line_end":68,"column_start":51,"column_end":62,"is_primary":false,"text":[{"text":"    pub fn record_buffer_size(&self, size: usize, buffer_type: &str) {","highlight_start":51,"highlight_end":62}],"label":"`buffer_type` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`buffer_type` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6910,"byte_end":6970,"line_start":176,"line_end":176,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":7647,"byte_end":7764,"line_start":188,"line_end":188,"column_start":9,"column_end":126,"is_primary":false,"text":[{"text":"        $crate::gauge!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":126}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":2423,"byte_end":2467,"line_start":69,"line_end":69,"column_start":9,"column_end":53,"is_primary":false,"text":[{"text":"        gauge!(\"buffer_size\", \"type\" => buffer_type).set(size as f64);","highlight_start":9,"highlight_end":53}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"gauge!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6746,"byte_end":6764,"line_start":174,"line_end":174,"column_start":1,"column_end":19,"is_primary":false,"text":[{"text":"macro_rules! gauge {","highlight_start":1,"highlight_end":19}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::gauge!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6746,"byte_end":6764,"line_start":174,"line_end":174,"column_start":1,"column_end":19,"is_primary":false,"text":[{"text":"macro_rules! gauge {","highlight_start":1,"highlight_end":19}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":2407,"byte_end":2408,"line_start":68,"line_end":68,"column_start":64,"column_end":65,"is_primary":false,"text":[{"text":"    pub fn record_buffer_size(&self, size: usize, buffer_type: &str) {","highlight_start":64,"highlight_end":65}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6910,"byte_end":6970,"line_start":176,"line_end":176,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":7647,"byte_end":7764,"line_start":188,"line_end":188,"column_start":9,"column_end":126,"is_primary":false,"text":[{"text":"        $crate::gauge!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":126}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":2423,"byte_end":2467,"line_start":69,"line_end":69,"column_start":9,"column_end":53,"is_primary":false,"text":[{"text":"        gauge!(\"buffer_size\", \"type\" => buffer_type).set(size as f64);","highlight_start":9,"highlight_end":53}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"gauge!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6746,"byte_end":6764,"line_start":174,"line_end":174,"column_start":1,"column_end":19,"is_primary":false,"text":[{"text":"macro_rules! gauge {","highlight_start":1,"highlight_end":19}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::gauge!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":6746,"byte_end":6764,"line_start":174,"line_end":174,"column_start":1,"column_end":19,"is_primary":false,"text":[{"text":"macro_rules! gauge {","highlight_start":1,"highlight_end":19}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:69:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m68\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_buffer_size(&self, size: usize, buffer_type: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-----------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`buffer_type` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m69\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        gauge!(\"buffer_size\", \"type\" => buffer_type).set(size as f64);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`buffer_type` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `gauge` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":2534,"byte_end":2545,"line_start":72,"line_end":72,"column_start":42,"column_end":53,"is_primary":false,"text":[{"text":"    pub fn record_buffer_overflow(&self, buffer_type: &str) {","highlight_start":42,"highlight_end":53}],"label":"`buffer_type` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`buffer_type` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":2563,"byte_end":2620,"line_start":73,"line_end":73,"column_start":9,"column_end":66,"is_primary":false,"text":[{"text":"        counter!(\"buffer_overflows_total\", \"type\" => buffer_type).increment(1);","highlight_start":9,"highlight_end":66}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":2547,"byte_end":2548,"line_start":72,"line_end":72,"column_start":55,"column_end":56,"is_primary":false,"text":[{"text":"    pub fn record_buffer_overflow(&self, buffer_type: &str) {","highlight_start":55,"highlight_end":56}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":2563,"byte_end":2620,"line_start":73,"line_end":73,"column_start":9,"column_end":66,"is_primary":false,"text":[{"text":"        counter!(\"buffer_overflows_total\", \"type\" => buffer_type).increment(1);","highlight_start":9,"highlight_end":66}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:73:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m72\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_buffer_overflow(&self, buffer_type: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-----------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                          \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`buffer_type` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m73\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        counter!(\"buffer_overflows_total\", \"type\" => buffer_type).increment(1);\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`buffer_type` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `counter` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":2704,"byte_end":2710,"line_start":77,"line_end":77,"column_start":39,"column_end":45,"is_primary":false,"text":[{"text":"    pub fn record_http_request(&self, method: &str, path: &str, status_code: u16) {","highlight_start":39,"highlight_end":45}],"label":"`method` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`method` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":2758,"byte_end":2910,"line_start":78,"line_end":81,"column_start":9,"column_end":52,"is_primary":false,"text":[{"text":"        counter!(\"http_requests_total\", ","highlight_start":9,"highlight_end":41},{"text":"               \"method\" => method, ","highlight_start":1,"highlight_end":36},{"text":"               \"path\" => path, ","highlight_start":1,"highlight_end":32},{"text":"               \"status\" => status_code.to_string())","highlight_start":1,"highlight_end":52}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":2712,"byte_end":2713,"line_start":77,"line_end":77,"column_start":47,"column_end":48,"is_primary":false,"text":[{"text":"    pub fn record_http_request(&self, method: &str, path: &str, status_code: u16) {","highlight_start":47,"highlight_end":48}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":2758,"byte_end":2910,"line_start":78,"line_end":81,"column_start":9,"column_end":52,"is_primary":false,"text":[{"text":"        counter!(\"http_requests_total\", ","highlight_start":9,"highlight_end":41},{"text":"               \"method\" => method, ","highlight_start":1,"highlight_end":36},{"text":"               \"path\" => path, ","highlight_start":1,"highlight_end":32},{"text":"               \"status\" => status_code.to_string())","highlight_start":1,"highlight_end":52}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:78:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m77\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m   \u001b[0m\u001b[0m    pub fn record_http_request(&self, method: &str, path: &str, status_code: u16) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`method` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m78\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m/\u001b[0m\u001b[0m \u001b[0m\u001b[0m        counter!(\"http_requests_total\", \u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m79\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m               \"method\" => method, \u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m80\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m               \"path\" => path, \u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m81\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m               \"status\" => status_code.to_string())\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m                                                   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m                                                   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|___________________________________________________\u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`method` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                     \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `counter` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":2718,"byte_end":2722,"line_start":77,"line_end":77,"column_start":53,"column_end":57,"is_primary":false,"text":[{"text":"    pub fn record_http_request(&self, method: &str, path: &str, status_code: u16) {","highlight_start":53,"highlight_end":57}],"label":"`path` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`path` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":2758,"byte_end":2910,"line_start":78,"line_end":81,"column_start":9,"column_end":52,"is_primary":false,"text":[{"text":"        counter!(\"http_requests_total\", ","highlight_start":9,"highlight_end":41},{"text":"               \"method\" => method, ","highlight_start":1,"highlight_end":36},{"text":"               \"path\" => path, ","highlight_start":1,"highlight_end":32},{"text":"               \"status\" => status_code.to_string())","highlight_start":1,"highlight_end":52}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":2724,"byte_end":2725,"line_start":77,"line_end":77,"column_start":59,"column_end":60,"is_primary":false,"text":[{"text":"    pub fn record_http_request(&self, method: &str, path: &str, status_code: u16) {","highlight_start":59,"highlight_end":60}],"label":"let's call the lifetime of this reference `'2`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'2` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3901,"byte_end":3961,"line_start":109,"line_end":109,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":4644,"byte_end":4763,"line_start":121,"line_end":121,"column_start":9,"column_end":128,"is_primary":false,"text":[{"text":"        $crate::counter!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":128}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":2758,"byte_end":2910,"line_start":78,"line_end":81,"column_start":9,"column_end":52,"is_primary":false,"text":[{"text":"        counter!(\"http_requests_total\", ","highlight_start":9,"highlight_end":41},{"text":"               \"method\" => method, ","highlight_start":1,"highlight_end":36},{"text":"               \"path\" => path, ","highlight_start":1,"highlight_end":32},{"text":"               \"status\" => status_code.to_string())","highlight_start":1,"highlight_end":52}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::counter!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":3735,"byte_end":3755,"line_start":107,"line_end":107,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! counter {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:78:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m77\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m   \u001b[0m\u001b[0m    pub fn record_http_request(&self, method: &str, path: &str, status_code: u16) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                       \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m----\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'2`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                       \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                       \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`path` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m78\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m/\u001b[0m\u001b[0m \u001b[0m\u001b[0m        counter!(\"http_requests_total\", \u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m79\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m               \"method\" => method, \u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m80\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m               \"path\" => path, \u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m81\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m               \"status\" => status_code.to_string())\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m                                                   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\u001b[0m                                                   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|___________________________________________________\u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`path` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                     \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'2` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `counter` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":3000,"byte_end":3006,"line_start":85,"line_end":85,"column_start":56,"column_end":62,"is_primary":false,"text":[{"text":"    pub fn record_http_latency(&self, latency_ms: f64, method: &str, path: &str) {","highlight_start":56,"highlight_end":62}],"label":"`method` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`method` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":3036,"byte_end":3110,"line_start":86,"line_end":86,"column_start":9,"column_end":83,"is_primary":false,"text":[{"text":"        histogram!(\"http_request_duration_ms\", \"method\" => method, \"path\" => path)","highlight_start":9,"highlight_end":83}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":3008,"byte_end":3009,"line_start":85,"line_end":85,"column_start":64,"column_end":65,"is_primary":false,"text":[{"text":"    pub fn record_http_latency(&self, latency_ms: f64, method: &str, path: &str) {","highlight_start":64,"highlight_end":65}],"label":"let's call the lifetime of this reference `'1`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'1` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":3036,"byte_end":3110,"line_start":86,"line_end":86,"column_start":9,"column_end":83,"is_primary":false,"text":[{"text":"        histogram!(\"http_request_duration_ms\", \"method\" => method, \"path\" => path)","highlight_start":9,"highlight_end":83}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:86:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m85\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_http_latency(&self, latency_ms: f64, method: &str, path: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                        \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m------\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'1`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                        \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                        \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`method` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m86\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        histogram!(\"http_request_duration_ms\", \"method\" => method, \"path\" => path)\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`method` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'1` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `histogram` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"borrowed data escapes outside of method","code":{"code":"E0521","explanation":"Borrowed data escapes outside of closure.\n\nErroneous code example:\n\n```compile_fail,E0521\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el: &str| {\n    list.push(el); // error: `el` escapes the closure body here\n};\n```\n\nA type annotation of a closure parameter implies a new lifetime declaration.\nConsider to drop it, the compiler is reliably able to infer them.\n\n```\nlet mut list: Vec<&str> = Vec::new();\n\nlet _add = |el| {\n    list.push(el);\n};\n```\n\nSee the [Closure type inference and annotation][closure-infere-annotation] and\n[Lifetime elision][lifetime-elision] sections of the Book for more details.\n\n[closure-infere-annotation]: https://doc.rust-lang.org/book/ch13-01-closures.html#closure-type-inference-and-annotation\n[lifetime-elision]: https://doc.rust-lang.org/reference/lifetime-elision.html\n"},"level":"error","spans":[{"file_name":"common/src/metrics.rs","byte_start":3014,"byte_end":3018,"line_start":85,"line_end":85,"column_start":70,"column_end":74,"is_primary":false,"text":[{"text":"    pub fn record_http_latency(&self, latency_ms: f64, method: &str, path: &str) {","highlight_start":70,"highlight_end":74}],"label":"`path` is a reference that is only valid in the method body","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"`path` escapes the method body here","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":3036,"byte_end":3110,"line_start":86,"line_end":86,"column_start":9,"column_end":83,"is_primary":false,"text":[{"text":"        histogram!(\"http_request_duration_ms\", \"method\" => method, \"path\" => path)","highlight_start":9,"highlight_end":83}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},{"file_name":"common/src/metrics.rs","byte_start":3020,"byte_end":3021,"line_start":85,"line_end":85,"column_start":76,"column_end":77,"is_primary":false,"text":[{"text":"    pub fn record_http_latency(&self, latency_ms: f64, method: &str, path: &str) {","highlight_start":76,"highlight_end":77}],"label":"let's call the lifetime of this reference `'2`","suggested_replacement":null,"suggestion_applicability":null,"expansion":null},{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":1512,"byte_end":1556,"line_start":50,"line_end":50,"column_start":15,"column_end":59,"is_primary":true,"text":[{"text":"            $($crate::Label::new($label_key, $label_value)),*","highlight_start":15,"highlight_end":59}],"label":"argument requires that `'2` must outlive `'static`","suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9864,"byte_end":9924,"line_start":240,"line_end":240,"column_start":26,"column_end":86,"is_primary":false,"text":[{"text":"        let metric_key = $crate::key_var!($name $(, $label_key $(=> $label_value)?)*);","highlight_start":26,"highlight_end":86}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":10613,"byte_end":10734,"line_start":252,"line_end":252,"column_start":9,"column_end":130,"is_primary":false,"text":[{"text":"        $crate::histogram!(target: ::std::module_path!(), level: $crate::Level::INFO, $name $(, $label_key $(=> $label_value)?)*)","highlight_start":9,"highlight_end":130}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":{"span":{"file_name":"common/src/metrics.rs","byte_start":3036,"byte_end":3110,"line_start":86,"line_end":86,"column_start":9,"column_end":83,"is_primary":false,"text":[{"text":"        histogram!(\"http_request_duration_ms\", \"method\" => method, \"path\" => path)","highlight_start":9,"highlight_end":83}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null},"macro_decl_name":"histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::histogram!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":9696,"byte_end":9718,"line_start":238,"line_end":238,"column_start":1,"column_end":23,"is_primary":false,"text":[{"text":"macro_rules! histogram {","highlight_start":1,"highlight_end":23}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}},"macro_decl_name":"$crate::key_var!","def_site_span":{"file_name":"/Users/daws/.cargo/registry/src/index.crates.io-1949cf8c6b5b557f/metrics-0.22.4/src/macros.rs","byte_start":522,"byte_end":542,"line_start":27,"line_end":27,"column_start":1,"column_end":21,"is_primary":false,"text":[{"text":"macro_rules! key_var {","highlight_start":1,"highlight_end":21}],"label":null,"suggested_replacement":null,"suggestion_applicability":null,"expansion":null}}}],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror[E0521]\u001b[0m\u001b[0m\u001b[1m: borrowed data escapes outside of method\u001b[0m\n\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m--> \u001b[0m\u001b[0mcommon/src/metrics.rs:86:9\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m85\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m    pub fn record_http_latency(&self, latency_ms: f64, method: &str, path: &str) {\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                                      \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m----\u001b[0m\u001b[0m  \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m-\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12mlet's call the lifetime of this reference `'2`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                                      \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m                                                                      \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m`path` is a reference that is only valid in the method body\u001b[0m\n\u001b[0m\u001b[1m\u001b[38;5;12m86\u001b[0m\u001b[0m \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m \u001b[0m\u001b[0m        histogram!(\"http_request_duration_ms\", \"method\" => method, \"path\" => path)\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9m`path` escapes the method body here\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\u001b[0m         \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;9margument requires that `'2` must outlive `'static`\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m|\u001b[0m\n\u001b[0m   \u001b[0m\u001b[0m\u001b[1m\u001b[38;5;12m= \u001b[0m\u001b[0m\u001b[1mnote\u001b[0m\u001b[0m: this error originates in the macro `$crate::key_var` which comes from the expansion of the macro `histogram` (in Nightly builds, run with -Z macro-backtrace for more info)\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"aborting due to 16 previous errors; 1 warning emitted","code":null,"level":"error","spans":[],"children":[],"rendered":"\u001b[0m\u001b[1m\u001b[38;5;9merror\u001b[0m\u001b[0m\u001b[1m: aborting due to 16 previous errors; 1 warning emitted\u001b[0m\n\n"}
{"$message_type":"diagnostic","message":"For more information about this error, try `rustc --explain E0521`.","code":null,"level":"failure-note","spans":[],"children":[],"rendered":"\u001b[0m\u001b[1mFor more information about this error, try `rustc --explain E0521`.\u001b[0m\n"}

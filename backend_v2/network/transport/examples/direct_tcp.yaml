# Direct TCP Transport Configuration
# Optimized for low-latency trading communication

default_mode: direct

channels:
  # Ultra-low latency arbitrage signals
  arbitrage_signals:
    name: "arbitrage_signals"
    mode: direct
    criticality: ultra_low_latency
    reliability: best_effort
    default_priority: critical
    max_message_size: 8192  # 8KB for minimal latency
    timeout: "100ms"
    retry:
      max_attempts: 1  # No retries for ultra-low latency
      initial_delay: "10ms"
      max_delay: "100ms"
      backoff_multiplier: 1.0
      jitter: false

  # High-throughput market data
  market_data:
    name: "market_data"
    mode: direct
    criticality: low_latency
    reliability: at_least_once
    default_priority: high
    max_message_size: 65536  # 64KB for market data
    timeout: "1s"
    retry:
      max_attempts: 3
      initial_delay: "100ms"
      max_delay: "1s"
      backoff_multiplier: 2.0
      jitter: true
    circuit_breaker:
      failure_threshold: 5
      success_threshold: 3
      timeout: "30s"
      half_open_max_calls: 3

  # Standard execution orders
  execution_orders:
    name: "execution_orders"
    mode: direct
    criticality: standard
    reliability: exactly_once
    default_priority: high
    max_message_size: 16384  # 16KB for order data
    timeout: "5s"
    retry:
      max_attempts: 5
      initial_delay: "200ms"
      max_delay: "10s"
      backoff_multiplier: 2.0
      jitter: true
    circuit_breaker:
      failure_threshold: 3
      success_threshold: 2
      timeout: "60s"
      half_open_max_calls: 2

# Routing rules for specific node pairs
routes:
  # Trading nodes to execution nodes - ultra priority
  - source_pattern: "trading-*"
    target_pattern: "execution-*"
    channels: ["arbitrage_signals", "execution_orders"]
    transport_mode: direct
    priority: 100
    metadata:
      description: "High-priority trading to execution routing"
      network_zone: "trading"

  # Data nodes to trading nodes - high throughput
  - source_pattern: "data-*"
    target_pattern: "trading-*"
    channels: ["market_data"]
    transport_mode: direct
    priority: 90
    metadata:
      description: "Market data feed routing"
      network_zone: "data"

  # Cross-zone communication - lower priority
  - source_pattern: "*"
    target_pattern: "*"
    channels: []  # All channels
    transport_mode: direct
    priority: 10
    metadata:
      description: "Default cross-zone routing"

# Bridge configuration (disabled for pure direct transport)
enable_bridge: false
bridge:
  direct_to_mq: false
  mq_to_direct: false
  buffer_size: 1000
  worker_threads: 1
  transformations: []
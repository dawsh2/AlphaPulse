<!-- ADD TO CSS SECTION -->
<style>
/* Strategy Catalogue Styles */
.strategy-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: var(--space-4);
    padding: var(--space-4);
}

.strategy-card {
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-primary);
    border-radius: var(--radius-md);
    padding: var(--space-4);
    transition: all var(--transition-fast);
    cursor: pointer;
    position: relative;
    overflow: hidden;
}

.strategy-card:hover {
    border-color: var(--color-border-hover);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.strategy-card.featured {
    border-color: var(--color-primary);
    background: linear-gradient(135deg, var(--color-bg-primary) 0%, rgba(255, 204, 0, 0.05) 100%);
}

.strategy-badge {
    position: absolute;
    top: var(--space-2);
    right: var(--space-2);
    background: var(--color-primary);
    color: var(--color-bg-primary);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-xs);
    font-size: var(--font-size-xs);
    font-weight: var(--font-weight-medium);
}

.strategy-header {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    margin-bottom: var(--space-3);
}

.strategy-icon {
    width: 48px;
    height: 48px;
    background: var(--color-bg-secondary);
    border-radius: var(--radius-sm);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 24px;
}

.strategy-info h3 {
    margin: 0 0 var(--space-1) 0;
    font-size: var(--font-size-md);
    font-weight: var(--font-weight-semibold);
}

.strategy-type {
    color: var(--color-text-secondary);
    font-size: var(--font-size-xs);
}

.strategy-description {
    color: var(--color-text-secondary);
    font-size: var(--font-size-sm);
    line-height: 1.5;
    margin-bottom: var(--space-3);
}

.strategy-metrics {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
}

.metric-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-1);
}

.metric-label {
    font-size: var(--font-size-xs);
    color: var(--color-text-secondary);
}

.metric-value {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-medium);
}

.metric-value.positive {
    color: var(--color-success);
}

.metric-value.negative {
    color: var(--color-danger);
}

.strategy-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-bottom: var(--space-3);
}

.strategy-tag {
    background: var(--color-bg-secondary);
    padding: var(--space-1) var(--space-2);
    border-radius: var(--radius-xs);
    font-size: var(--font-size-xs);
    color: var(--color-text-secondary);
}

.strategy-actions {
    display: flex;
    gap: var(--space-2);
    margin-top: auto;
}

.strategy-action {
    flex: 1;
    padding: var(--space-2);
    background: var(--color-bg-secondary);
    border: 1px solid var(--color-border-primary);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-xs);
    text-align: center;
    cursor: pointer;
    transition: all var(--transition-fast);
}

.strategy-action:hover {
    background: var(--color-bg-tertiary);
    border-color: var(--color-border-hover);
}

.strategy-action.primary {
    background: var(--color-primary);
    color: var(--color-bg-primary);
    border-color: var(--color-primary);
}

.strategy-action.primary:hover {
    background: var(--color-primary-hover);
    border-color: var(--color-primary-hover);
}

.catalogue-filters {
    display: flex;
    gap: var(--space-3);
    padding: var(--space-4);
    border-bottom: 1px solid var(--color-border-primary);
}

.filter-group {
    display: flex;
    align-items: center;
    gap: var(--space-2);
}

.filter-label {
    font-size: var(--font-size-sm);
    color: var(--color-text-secondary);
}

.filter-select {
    padding: var(--space-2);
    background: var(--color-bg-primary);
    border: 1px solid var(--color-border-primary);
    border-radius: var(--radius-sm);
    font-size: var(--font-size-sm);
}
</style>

<!-- ADD TO SIDEBAR TABS -->
<button class="sidebar-tab" onclick="switchTab('catalogue', this)">Catalogue</button>

<!-- ADD TO TAB CONTENTS (after notebooksTab) -->
<div class="tab-content" id="catalogueTab">
    <div class="catalogue-filters">
        <div class="filter-group">
            <label class="filter-label">Type:</label>
            <select class="filter-select" onchange="filterStrategies('type', this.value)">
                <option value="all">All Types</option>
                <option value="trend">Trend Following</option>
                <option value="meanreversion">Mean Reversion</option>
                <option value="marketmaking">Market Making</option>
                <option value="arbitrage">Arbitrage</option>
                <option value="ml">Machine Learning</option>
            </select>
        </div>
        <div class="filter-group">
            <label class="filter-label">Complexity:</label>
            <select class="filter-select" onchange="filterStrategies('complexity', this.value)">
                <option value="all">All Levels</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
            </select>
        </div>
        <div class="filter-group">
            <label class="filter-label">Sort:</label>
            <select class="filter-select" onchange="sortStrategies(this.value)">
                <option value="name">Name</option>
                <option value="performance">Performance</option>
                <option value="popularity">Most Used</option>
                <option value="recent">Recently Added</option>
            </select>
        </div>
    </div>
    
    <div class="strategy-grid" id="strategyGrid">
        <!-- EMA Cross Strategy -->
        <div class="strategy-card featured" data-type="trend" data-complexity="beginner">
            <div class="strategy-badge">Featured</div>
            <div class="strategy-header">
                <div class="strategy-icon">📈</div>
                <div class="strategy-info">
                    <h3>EMA Cross</h3>
                    <div class="strategy-type">Trend Following</div>
                </div>
            </div>
            <div class="strategy-description">
                Classic exponential moving average crossover strategy. Enters long when fast EMA crosses above slow EMA, and vice versa.
            </div>
            <div class="strategy-metrics">
                <div class="metric-item">
                    <span class="metric-label">Avg Return</span>
                    <span class="metric-value positive">+12.5%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Win Rate</span>
                    <span class="metric-value">45%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Max Drawdown</span>
                    <span class="metric-value negative">-8.2%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Sharpe Ratio</span>
                    <span class="metric-value">1.35</span>
                </div>
            </div>
            <div class="strategy-tags">
                <span class="strategy-tag">Simple</span>
                <span class="strategy-tag">All Markets</span>
                <span class="strategy-tag">Low Frequency</span>
            </div>
            <div class="strategy-actions">
                <button class="strategy-action" onclick="viewStrategy('ema_cross')">View Code</button>
                <button class="strategy-action primary" onclick="backtest('ema_cross')">Backtest</button>
            </div>
        </div>
        
        <!-- Market Maker Strategy -->
        <div class="strategy-card" data-type="marketmaking" data-complexity="advanced">
            <div class="strategy-header">
                <div class="strategy-icon">💹</div>
                <div class="strategy-info">
                    <h3>Market Maker</h3>
                    <div class="strategy-type">Market Making</div>
                </div>
            </div>
            <div class="strategy-description">
                Provides liquidity by placing limit orders on both sides of the order book. Profits from the bid-ask spread.
            </div>
            <div class="strategy-metrics">
                <div class="metric-item">
                    <span class="metric-label">Daily Volume</span>
                    <span class="metric-value">$1.2M</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Spread Capture</span>
                    <span class="metric-value positive">72%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Inventory Risk</span>
                    <span class="metric-value">Medium</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Sharpe Ratio</span>
                    <span class="metric-value">2.1</span>
                </div>
            </div>
            <div class="strategy-tags">
                <span class="strategy-tag">Complex</span>
                <span class="strategy-tag">High Frequency</span>
                <span class="strategy-tag">Crypto</span>
            </div>
            <div class="strategy-actions">
                <button class="strategy-action" onclick="viewStrategy('market_maker')">View Code</button>
                <button class="strategy-action primary" onclick="backtest('market_maker')">Backtest</button>
            </div>
        </div>
        
        <!-- Order Book Imbalance -->
        <div class="strategy-card" data-type="ml" data-complexity="intermediate">
            <div class="strategy-header">
                <div class="strategy-icon">📊</div>
                <div class="strategy-info">
                    <h3>Order Book Imbalance</h3>
                    <div class="strategy-type">Microstructure</div>
                </div>
            </div>
            <div class="strategy-description">
                Analyzes order book depth to predict short-term price movements based on supply/demand imbalances.
            </div>
            <div class="strategy-metrics">
                <div class="metric-item">
                    <span class="metric-label">Signals/Day</span>
                    <span class="metric-value">150+</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Accuracy</span>
                    <span class="metric-value positive">68%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Avg Hold Time</span>
                    <span class="metric-value">3.5 min</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Profit Factor</span>
                    <span class="metric-value">1.8</span>
                </div>
            </div>
            <div class="strategy-tags">
                <span class="strategy-tag">ML Enhanced</span>
                <span class="strategy-tag">Real-time</span>
                <span class="strategy-tag">Futures</span>
            </div>
            <div class="strategy-actions">
                <button class="strategy-action" onclick="viewStrategy('orderbook_imbalance')">View Code</button>
                <button class="strategy-action primary" onclick="backtest('orderbook_imbalance')">Backtest</button>
            </div>
        </div>
        
        <!-- Volatility Market Maker -->
        <div class="strategy-card" data-type="marketmaking" data-complexity="advanced">
            <div class="strategy-header">
                <div class="strategy-icon">🎯</div>
                <div class="strategy-info">
                    <h3>Volatility Market Maker</h3>
                    <div class="strategy-type">Market Making</div>
                </div>
            </div>
            <div class="strategy-description">
                Adjusts spread dynamically based on market volatility. Wider spreads in volatile markets, tighter in calm conditions.
            </div>
            <div class="strategy-metrics">
                <div class="metric-item">
                    <span class="metric-label">Avg Spread</span>
                    <span class="metric-value">0.05%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Fill Rate</span>
                    <span class="metric-value positive">82%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Vol Adjusted SR</span>
                    <span class="metric-value">3.2</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Max Position</span>
                    <span class="metric-value">$50k</span>
                </div>
            </div>
            <div class="strategy-tags">
                <span class="strategy-tag">Adaptive</span>
                <span class="strategy-tag">Risk Managed</span>
                <span class="strategy-tag">Options</span>
            </div>
            <div class="strategy-actions">
                <button class="strategy-action" onclick="viewStrategy('volatility_market_maker')">View Code</button>
                <button class="strategy-action primary" onclick="backtest('volatility_market_maker')">Backtest</button>
            </div>
        </div>
        
        <!-- TWAP Algorithm -->
        <div class="strategy-card" data-type="execution" data-complexity="intermediate">
            <div class="strategy-header">
                <div class="strategy-icon">⏱️</div>
                <div class="strategy-info">
                    <h3>TWAP Execution</h3>
                    <div class="strategy-type">Execution Algorithm</div>
                </div>
            </div>
            <div class="strategy-description">
                Time-weighted average price algorithm for large order execution. Minimizes market impact by splitting orders over time.
            </div>
            <div class="strategy-metrics">
                <div class="metric-item">
                    <span class="metric-label">Slippage</span>
                    <span class="metric-value positive">-0.02%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Completion Rate</span>
                    <span class="metric-value">99.8%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Market Impact</span>
                    <span class="metric-value">Low</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Typical Size</span>
                    <span class="metric-value">$100k+</span>
                </div>
            </div>
            <div class="strategy-tags">
                <span class="strategy-tag">Execution</span>
                <span class="strategy-tag">Institutional</span>
                <span class="strategy-tag">Large Orders</span>
            </div>
            <div class="strategy-actions">
                <button class="strategy-action" onclick="viewStrategy('twap')">View Code</button>
                <button class="strategy-action primary" onclick="configure('twap')">Configure</button>
            </div>
        </div>
        
        <!-- Bollinger Bands Mean Reversion -->
        <div class="strategy-card" data-type="meanreversion" data-complexity="beginner">
            <div class="strategy-header">
                <div class="strategy-icon">📉</div>
                <div class="strategy-info">
                    <h3>Bollinger Bands MR</h3>
                    <div class="strategy-type">Mean Reversion</div>
                </div>
            </div>
            <div class="strategy-description">
                Trades price reversions when price touches Bollinger Bands. Buys at lower band, sells at upper band.
            </div>
            <div class="strategy-metrics">
                <div class="metric-item">
                    <span class="metric-label">Win Rate</span>
                    <span class="metric-value positive">62%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Avg Trade</span>
                    <span class="metric-value">+0.8%</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Trades/Month</span>
                    <span class="metric-value">25</span>
                </div>
                <div class="metric-item">
                    <span class="metric-label">Recovery Time</span>
                    <span class="metric-value">3 days</span>
                </div>
            </div>
            <div class="strategy-tags">
                <span class="strategy-tag">Simple</span>
                <span class="strategy-tag">Range Markets</span>
                <span class="strategy-tag">Stocks</span>
            </div>
            <div class="strategy-actions">
                <button class="strategy-action" onclick="viewStrategy('bollinger_mr')">View Code</button>
                <button class="strategy-action primary" onclick="backtest('bollinger_mr')">Backtest</button>
            </div>
        </div>
    </div>
</div>

<!-- ADD TO JAVASCRIPT SECTION -->
<script>
// Strategy Catalogue Functions
function filterStrategies(filterType, value) {
    const cards = document.querySelectorAll('.strategy-card');
    
    cards.forEach(card => {
        if (value === 'all') {
            card.style.display = 'block';
        } else {
            const cardValue = card.getAttribute(`data-${filterType}`);
            card.style.display = cardValue === value ? 'block' : 'none';
        }
    });
}

function sortStrategies(sortBy) {
    const grid = document.getElementById('strategyGrid');
    const cards = Array.from(grid.children);
    
    cards.sort((a, b) => {
        switch(sortBy) {
            case 'name':
                const nameA = a.querySelector('h3').textContent;
                const nameB = b.querySelector('h3').textContent;
                return nameA.localeCompare(nameB);
            
            case 'performance':
                // Sort by first metric value (simplified)
                const perfA = parseFloat(a.querySelector('.metric-value').textContent.replace(/[^0-9.-]/g, ''));
                const perfB = parseFloat(b.querySelector('.metric-value').textContent.replace(/[^0-9.-]/g, ''));
                return perfB - perfA;
            
            case 'popularity':
                // Would need actual usage data
                return 0;
            
            case 'recent':
                // Would need timestamp data
                return 0;
                
            default:
                return 0;
        }
    });
    
    // Re-append sorted cards
    cards.forEach(card => grid.appendChild(card));
}

function viewStrategy(strategyName) {
    // Navigate to strategy code viewer
    console.log('Viewing strategy:', strategyName);
    // Could open in code editor or modal
    window.open(`/develop#strategy=${strategyName}`, '_blank');
}

function backtest(strategyName) {
    // Navigate to backtesting with strategy pre-loaded
    console.log('Backtesting strategy:', strategyName);
    // Could load strategy into backtesting environment
    alert(`Loading ${strategyName} into backtesting environment...`);
}

function configure(strategyName) {
    // Open configuration modal for execution algorithms
    console.log('Configuring:', strategyName);
    alert(`Opening configuration for ${strategyName}...`);
}
</script>
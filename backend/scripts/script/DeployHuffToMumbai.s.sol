// SPDX-License-Identifier: MIT
pragma solidity ^0.8.19;

import "forge-std/Script.sol";

contract DeployHuffToMumbai is Script {
    
    function run() external {
        uint256 deployerPrivateKey = vm.envUint("PRIVATE_KEY");
        vm.startBroadcast(deployerPrivateKey);
        
        // Deploy all three Huff contracts with real bytecode
        
        console.log("=== DEPLOYING HUFF CONTRACTS TO MUMBAI ===");
        
        // Extreme contract bytecode (766 bytes) - USDC optimized
        bytes memory extremeBytecode = hex"335f556102ee80600d3d393df35f3560e01c80631b11d0ff146100295780633cd126591461020057806351cff8d9146102a0575f5ffd5b3373794a61358d6845594f94dc1db02a252b5b4814ad18610048575f5ffd5b60243560443560c03560e035610120356101403563095ea7b35f52826004528660245260015f60445f5f732791bca1f2de4661ed88a30c99a7a9449aa841745af1506338ed17395f52866004525f60245260a0604452306064524261012c01608452600260a052732791bca1f2de4661ed88a30c99a7a9449aa8417460c0528460e05260605f6101005f5f835af15060405163095ea7b35f52856004528160245260015f60445f5f865af15087870185016338ed17395f52826004528160245260a0604452306064524261012c01608452600260a0528660c052732791bca1f2de4661ed88a30c99a7a9449aa8417460e05260605f6101005f5f865af15088880163095ea7b35f5273794a61358d6845594f94dc1db02a252b5b4814ad6004528160245260015f60445f5f732791bca1f2de4661ed88a30c99a7a9449aa841745af1506370a082315f523060045260205f60245f5f732791bca1f2de4661ed88a30c99a7a9449aa841745afa505f5180156101ee575f5463a9059cbb5f52816004528160245260015f60445f5f732791bca1f2de4661ed88a30c99a7a9449aa841745af1505b50505050505050505060015f5260205ff35b5f54331861020c575f5ffd5b6004356024356044356064356084356342b0b77c5f5230600452732791bca1f2de4661ed88a30c99a7a9449aa8417460245284604452602060645260845260a060a0528360c0528360e052732791bca1f2de4661ed88a30c99a7a9449aa8417461010052826101205280610140525f5f6101605f5f73794a61358d6845594f94dc1db02a252b5b4814ad5af15050505050005b5f5433186102ac575f5ffd5b6004356370a082315f523060045260205f60245f5f815afa505f5180156102e9575f5463a9059cbb5f52816004528160245260015f60445f5f845af15b50505000";
        
        address huffExtreme;
        assembly {
            huffExtreme := create(0, add(extremeBytecode, 0x20), mload(extremeBytecode))
        }
        require(huffExtreme != address(0), "Extreme deployment failed");
        console.log("Huff Extreme deployed at:", huffExtreme);
        
        // MEV Multi-Pool contract bytecode (2,332 bytes)
        bytes memory mevBytecode = hex"335f5561091c80600d3d393df35f3560e01c80631b11d0ff146100295780633cd126591461085f57806351cff8d9146108ce575f5ffd5b3373794a61358d6845594f94dc1db02a252b5b4814ad18610048575f5ffd5b60243560443560c03560e035610100358260011461019357826002146102ac57826003146104c0578280865b821561018b57813582602001358360400135846060013585608001358660a00135808560031461010e5763095ea7b35f52866004528060245260015f60445f5f855af1506338ed17395f52806004528360245260a0604452306064524261012c01608452600260a0528460c0528360e05260605f6101005f5f875af115610105576040519650505050505050566101095b5f5ffd5b566101775b63095ea7b35f52866004528060245260015f60445f5f855af15063414bf3895f52846004528360245282604452306064524261012c016084528060a4528360c4525f60e45260205f6101045f5f875af115610172575f519650505050505050566101765b5f5ffd5b5b90926001039160c001505050505050566100745b505050566107e15b803581602001358260400135836060013584608001358560a0013586856003146101c35785600214610230575f5ffd5b63095ea7b35f52866004528060245260015f60445f5f855af15063414bf3895f52846004528360245282604452306064524261012c016084528060a4528360c4525f60e45260205f6101045f5f875af115610227575f5196505050505050505661022b5b5f5ffd5b566102a05b63095ea7b35f52866004528060245260015f60445f5f855af1506338ed17395f52806004528360245260a0604452306064524261012c01608452600260a0528460c0528360e05260605f6101005f5f875af1156102975760405196505050505050505661029b5b5f5ffd5b566102a05b50505050505050566107e15b803581602001358260400135836060013584608001358560a0013586856003146103405763095ea7b35f52866004528060245260015f60445f5f855af1506338ed17395f52806004528360245260a0604452306064524261012c01608452600260a0528460c0528360e05260605f6101005f5f875af1156103375760405196505050505050505661033b5b5f5ffd5b566103a95b63095ea7b35f52866004528060245260015f60445f5f855af15063414bf3895f52846004528360245282604452306064524261012c016084528060a4528360c4525f60e45260205f6101045f5f875af1156103a4575f519650505050505050566103a85b5f5ffd5b5b955050505050508160c001358260e00135836101000135846101200135856101400135866101600135808560031461044b5763095ea7b35f52866004528060245260015f60445f5f855af1506338ed17395f52806004528360245260a0604452306064524261012c01608452600260a0528460c0528360e05260605f6101005f5f875af115610442576040519650505050505050566104465b5f5ffd5b566104b45b63095ea7b35f52866004528060245260015f60445f5f855af15063414bf3895f52846004528360245282604452306064524261012c016084528060a4528360c4525f60e45260205f6101045f5f875af1156104af575f519650505050505050566104b35b5f5ffd5b5b95505050505050566107e15b803581602001358260400135836060013584608001358560a0013586856003146105545763095ea7b35f52866004528060245260015f60445f5f855af1506338ed17395f52806004528360245260a0604452306064524261012c01608452600260a0528460c0528360e05260605f6101005f5f875af11561054b5760405196505050505050505661054f5b5f5ffd5b566105bd5b63095ea7b35f52866004528060245260015f60445f5f855af15063414bf3895f52846004528360245282604452306064524261012c016084528060a4528360c4525f60e45260205f6101045f5f875af1156105b8575f519650505050505050566105bc5b5f5ffd5b5b955050505050508160c001358260e00135836101000135846101200135856101400135866101600135808560031461065f5763095ea7b35f52866004528060245260015f60445f5f855af1506338ed17395f52826004528360245260a0604452306064524261012c01608452600260a0528460c0528360e05260605f6101005f5f875af1156106565760405196505050505050505661065a5b5f5ffd5b566106c85b63095ea7b35f52866004528060245260015f60445f5f855af15063414bf3895f52846004528360245282604452306064524261012c016084528060a4528360c4525f60e45260205f6101045f5f875af1156106c3575f519650505050505050566106c75b5f5ffd5b5b95505050505050816101800135826101a00135836101c00135846101e00135856102000135866102200135808560031461076c5763095ea7b35f52866004528060245260015f60445f5f855af1506338ed17395f52806004528360245260a0604452306064524261012c01608452600260a0528460c0528360e05260605f6101005f5f875af115610763576040519650505050505050566107675b5f5ffd5b566107d55b63095ea7b35f52866004528060245260015f60445f5f855af15063414bf3895f52846004528360245282604452306064524261012c016084528060a4528360c4525f60e45260205f6101045f5f875af1156107d0575f519650505050505050566107d45b5f5ffd5b5b95505050505050566107e15b8585018463095ea7b35f5273794a61358d6845594f94dc1db02a252b5b4814ad6004528260245260015f60445f5f815af150836370a082315f523060045260205f60245f5f815afa505f51801561084f575f5463a9059cbb5f52816004528160245260015f60445f5f845af1505b5050505050505060015f5260205ff35b5f54331861086b575f5ffd5b6004356024356044356064356342b0b77c5f5230600452826024528360445260a06064525f608452608060a0528160c0528260e05280610100525f610120525f5f6101405f5f73794a61358d6845594f94dc1db02a252b5b4814ad5af150505050005b5f5433186108da575f5ffd5b6004356370a082315f523060045260205f60245f5f815afa505f518015610917575f5463a9059cbb5f52816004528160245260015f60445f5f845af15b50505000";
        
        address huffMEV;
        assembly {
            huffMEV := create(0, add(mevBytecode, 0x20), mload(mevBytecode))
        }
        require(huffMEV != address(0), "MEV deployment failed");
        console.log("Huff MEV deployed at:", huffMEV);
        
        // Ultra-optimized contract bytecode (3,484 bytes)
        bytes memory ultraBytecode = hex"335f55610d7b80600d3d393df35f35807f1b11d0ff00000000000000000000000000000000000000000000000000000000146100455760e01c80633cd1265914610c4657806351cff8d914610ce5575f5ffd5b505f5f525f610200525f610400523373794a61358d6845594f94dc1db02a252b5b4814ad18610072575f5ffd5b60243560443560c03560e03561010035828086806001146100a557806002146102705780600314610605575f5ffd56610b675b50803581602001358260400135836060013584608001358560a00135868560031461019b576f095ea7b338ed1739a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af15092610200528061020060040152836102006024015260a06102006044015230610200606401524261012c0161020060840152600261020060a401528461020060c401528361020060e4015261040060606101046102005f875af11561019257610400602001519650505050505050566101965b5f5ffd5b566102635b6f095ea7b3414bf389a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af150926102005284610200600401528361020060240152826102006044015230610200606401524261012c01610200608401528061020060a401528361020060c401525f61020060e4015261040060206101046102005f875af11561025e57610400519650505050505050566102625b5f5ffd5b5b955050505050505056610b675b50803581602001358260400135836060013584608001358560a001358685600314610366576f095ea7b338ed1739a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af15092610200528061020060040152836102006024015260a06102006044015230610200606401524261012c0161020060840152600261020060a401528461020060c401528361020060e4015261040060606101046102005f875af11561035d57610400602001519650505050505050566103615b5f5ffd5b5661042e5b6f095ea7b3414bf389a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af150926102005284610200600401528361020060240152826102006044015230610200606401524261012c01610200608401528061020060a401528561020060c401525f61020060e4015261040060206101046102005f875af115610429576104005196505050505050505661042d5b5f5ffd5b5b955050505050508160c001358260e001358361010001358461012001358561014001358661016001358085600314610531576f095ea7b338ed1739a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af15092610200528061020060040152836102006024015260a06102006044015230610200606401524261012c0161020060840152600261020060a401528461020060c401528361020060e4015261040060606101046102005f875af115610528576104006020015196505050505050505661052c5b5f5ffd5b566105f95b6f095ea7b3414bf389a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af150926102005284610200600401528361020060240152826102006044015230610200606401524261012c01610200608401528061020060a401528361020060c401525f61020060e4015261040060206101046102005f875af1156105f457610400519650505050505050566105f85b5f5ffd5b5b9550505050505056610b675b50803581602001358260400135836060013584608001358560a0013586856003146106fb576f095ea7b338ed1739a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af15092610200528061020060040152836102006024015260a06102006044015230610200606401524261012c0161020060840152600261020060a401528461020060c401528361020060e4015261040060606101046102005f875af1156106f257610400602001519650505050505050566106f65b5f5ffd5b566107c35b6f095ea7b3414bf389a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af150926102005284610200600401528361020060240152826102006044015230610200606401524261012c01610200608401528061020060a401528361020060c401525f61020060e4015261040060206101046102005f875af1156107be57610400519650505050505050566107c25b5f5ffd5b5b955050505050508160c001358260e0013583610100013584610120013585610140013586610160013580856003146108c6576f095ea7b338ed1739a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af15092610200528061020060040152836102006024015260a06102006044015230610200606401524261012c0161020060840152600261020060a401528461020060c401528361020060e4015261040060606101046102005f875af1156108bd57610400602001519650505050505050566108c15b5f5ffd5b5661098e5b6f095ea7b3414bf389a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af150926102005284610200600401528361020060240152826102006044015230610200606401524261012c01610200608401528061020060a401528361020060c401525f61020060e4015261040060206101046102005f875af115610989576104005196505050505050505661098d5b5f5ffd5b5b95505050505050816101800135826101a00135836101c00135846101e001358561020001358661022001358085600314610a93576f095ea7b338ed1739a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af15092610200528061020060040152836102006024015260a06102006044015230610200606401524261012c0161020060840152600261020060a401528461020060c401528561020060e4015261040060606101046102005f875af115610a8a5761040060200151965050505050505056610a8e5b5f5ffd5b56610b5b5b6f095ea7b3414bf389a9059cbb70a082318060e01c8160c01c63ffffffff168260a01c63ffffffff168360801c63ffffffff1693610200528761020060040152806102006024015260015f60446102005f875af150926102005284610200600401528361020060240152826102006044015230610200606401524261012c01610200608401528061020060a401528361020060c401525f61020060e4015261040060206101046102005f875af115610b565761040051965050505050505056610b5a5b5f5ffd5b5b9550505050505056610b675b858501846f095ea7b338ed1739a9059cbb70a0823160e01c6102005273794a61358d6845594f94dc1db02a252b5b4814ad61020060040152816102006024015260015f60446102005f825af1505050836f095ea7b338ed1739a9059cbb70a0823160801c63ffffffff16610200523061020060040152610400602060246102005f815afa50610400518015610c35576f095ea7b338ed1739a9059cbb70a0823160a01c63ffffffff16610200525f5460601c61020060040152816102006024015260015f60445f5f835af15b505050505050505060015f5260205ff35b505f5460601c3318610c56575f5ffd5b6004356024356044356064356342b0b77c6102005230610200600401528261020060240152836102006044015260a0610200606401525f61020060840152608061020060a001528161020060c001528261020060e001528061020061010001525f61020061012001525f5f6101406102005f73794a61358d6845594f94dc1db02a252b5b4814ad5af150505050005b505f5460601c3318610cf5575f5ffd5b6004356f095ea7b338ed1739a9059cbb70a0823160801c63ffffffff16610200523061020060040152610400602060246102005f815afa50610400518015610d76576f095ea7b338ed1739a9059cbb70a0823160a01c63ffffffff16610200525f5460601c61020060040152816102006024015260015f60446102005f845af15b50505000";
        
        address huffUltra;
        assembly {
            huffUltra := create(0, add(ultraBytecode, 0x20), mload(ultraBytecode))
        }
        require(huffUltra != address(0), "Ultra deployment failed");
        console.log("Huff Ultra deployed at:", huffUltra);
        
        console.log("=== DEPLOYMENT COMPLETE ===");
        console.log("All contracts deployed successfully to Mumbai testnet");
        
        vm.stopBroadcast();
    }
}